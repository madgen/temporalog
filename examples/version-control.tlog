% Object graph
%
%    1                                  8
%  a.txt        2          7          b.txt
%  c.txt      c.txt      a.txt        a.txt
% a4afb5 --> 0778df --> 376e06 ----> 288f0d---
%                  \            /      ^     |
%                   --> 9eb447--       |------
%                        b.txt
%                        c.txt
%                          5
%
.pred version(text,text).
version("a4afb5","0778df").
version("0778df","376e06").
version("376e06","288f0d").
version("0778df","9eb447").
version("9eb447","288f0d").
version("288f0d","288f0d").

.pred clock(int,int).
clock(1,2).
clock(2,3).
clock(3,4).
clock(4,5).
clock(5,6).
clock(6,7).
clock(7,8).
clock(8,9).
clock(9,-1).
clock(-1,-1).

.pred recent(int).
recent(6).
recent(T') :- recent(T), clock(T,T'), ! clock(T,-1).

.pred file(text) @ version clock.
file("a.txt") @ <version> "a4afb5" @ 1.
file("c.txt") @ <version> "a4afb5" @ 1.
file("c.txt") @ <version> "0778df" @ 2.
file("a.txt") @ <version> "376e06" @ 7.
file("b.txt") @ <version> "9eb447" @ 5.
file("c.txt") @ <version> "9eb447" @ 5.
file("a.txt") @ <version> "288f0d" @ 8.
file("b.txt") @ <version> "288f0d" @ 8.

.pred file_explicit(text,text,int).
file_explicit(File,Version,Time) :- file(File) @ <version> Version @ Time.

?- AG <version> file("a.txt").
?- (AG <version> file("a.txt")) @ <version> "a4afb5".
?- AG (file("a.txt") @ <version> "a4afb5").

?- | <version> T (file(File) @ <version> T).
?- file(File), | <clock> T recent(T).

.pred reverse_version(text,text).
reverse_version(H,H') :- version(H',H), ! version(H,H).
reverse_version(H,H)  :- version(H,H'), ! version(_,H).

?- AG <reverse_version> | <reverse_version> I (file("c.txt") @ <version> I).

.pred day(text) @ clock.
day("Monday")    @ 1.
day("Tuesday")   @ 2.
day("Wednesday") @ 3.
day("Thursday")  @ 4.
day("Friday")    @ 5.
day("Saturday")  @ 6.
day("Sunday")    @ 7.
day("Monday")    @ 8.
day("Tuesday")   @ 9.

?- file("a.txt"), day("Monday").
